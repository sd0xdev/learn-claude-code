// Dungeons & Agents - Character Portrait System
// Pixel art portraits rendered via CSS box-shadow

// Color palettes for each character
// Keys: 0=transparent, 1=skin, 2=dark, 3=accent, 4=highlight, 5=secondary
const pixelColors = {
  wizard: { 1: '#e8b88a', 2: '#4a3b7c', 3: '#6b5b9a', 4: '#ffffff', 5: '#8b7355' },
  dwarf: { 1: '#e8b88a', 2: '#8b5a2b', 3: '#a0522d', 4: '#ffffff', 5: '#666666' },
  thief: { 1: '#e8b88a', 2: '#2a2a2a', 3: '#444444', 4: '#ffffff', 5: '#1a1a1a' },
  // Header mascots
  princess: { 1: '#e8b88a', 2: '#da7756', 3: '#c25d3a', 4: '#ffffff', 5: '#daa520', 6: '#8b4513' },
  robot: { 1: '#da7756', 2: '#444444', 3: '#666666', 4: '#88ccff', 5: '#333333', 6: '#da7756' },
  // Enemies
  goblin: { 1: '#5a8a5a', 2: '#3d5c3d', 3: '#8b0000', 4: '#ffff00', 5: '#2d2d2d' },
  // Items (8x8 icons)
  sword: { 1: '#c0c0c0', 2: '#808080', 3: '#8b4513', 4: '#daa520' },
  key: { 1: '#ffd700', 2: '#b8860b', 3: '#8b6914' },
  potion: { 1: '#ff6b6b', 2: '#8b0000', 3: '#4a4a4a', 4: '#ffffff' },
  torch: { 1: '#8b4513', 2: '#ff6600', 3: '#ffcc00', 4: '#2d2d2d' },
  gem: { 1: '#9400d3', 2: '#4b0082', 3: '#ffffff' },
}

// 10x10 pixel art grids for each character
const portraits = {
  wizard: [
    [0,0,0,0,3,3,0,0,0,0],
    [0,0,0,3,2,2,3,0,0,0],
    [0,0,3,2,2,2,2,3,0,0],
    [0,0,0,1,1,1,1,0,0,0],
    [0,0,1,4,1,1,4,1,0,0],
    [0,0,0,1,1,1,1,0,0,0],
    [0,0,0,1,3,3,1,0,0,0],
    [0,0,5,5,5,5,5,5,0,0],
    [0,0,0,2,2,2,2,0,0,0],
    [0,0,0,2,0,0,2,0,0,0],
  ],
  dwarf: [
    [0,0,5,5,5,5,5,5,0,0],
    [0,5,5,5,5,5,5,5,5,0],
    [0,0,1,1,1,1,1,1,0,0],
    [0,0,1,4,1,1,4,1,0,0],
    [0,0,1,1,3,3,1,1,0,0],
    [0,2,2,2,2,2,2,2,2,0],
    [0,0,2,2,2,2,2,2,0,0],
    [0,0,0,2,2,2,2,0,0,0],
    [0,0,0,0,2,2,0,0,0,0],
    [0,0,0,0,2,2,0,0,0,0],
  ],
  thief: [
    [0,0,2,2,2,2,2,2,0,0],
    [0,2,2,2,2,2,2,2,2,0],
    [0,2,2,1,1,1,1,2,2,0],
    [0,0,1,4,1,1,4,1,0,0],
    [0,0,5,5,5,5,5,5,0,0],
    [0,0,0,1,1,1,1,0,0,0],
    [0,0,0,3,3,3,3,0,0,0],
    [0,0,3,3,0,0,3,3,0,0],
    [0,0,3,0,0,0,0,3,0,0],
    [0,0,0,0,0,0,0,0,0,0],
  ],
  // Header mascots - 12x12 for more detail
  princess: [
    [0,0,0,0,0,5,0,0,0,0,0,0],
    [0,0,0,0,5,5,5,0,0,0,0,0],
    [0,0,0,6,1,1,1,6,0,0,0,0],
    [0,0,0,6,4,1,4,6,0,0,0,0],
    [0,0,0,0,1,1,1,0,0,0,0,0],
    [0,0,0,0,0,1,0,0,0,0,0,0],
    [0,0,0,0,2,2,2,0,0,0,0,0],
    [0,0,0,2,2,3,2,2,0,0,0,0],
    [0,0,0,2,2,2,2,2,0,0,0,0],
    [0,0,2,2,2,2,2,2,2,0,0,0],
    [0,2,2,2,2,2,2,2,2,2,0,0],
    [0,0,0,0,1,0,1,0,0,0,0,0],
  ],
  robot: [
    [0,0,0,0,0,6,0,0,0,0,0,0],
    [0,0,0,0,0,6,0,0,0,0,0,0],
    [0,0,0,2,2,2,2,2,0,0,0,0],
    [0,0,2,3,4,3,4,3,2,0,0,0],
    [0,0,2,3,3,3,3,3,2,0,0,0],
    [0,0,2,3,6,6,6,3,2,0,0,0],
    [0,0,0,5,5,5,5,5,0,0,0,0],
    [0,0,2,2,3,3,3,2,2,0,0,0],
    [0,0,2,0,3,3,3,0,2,0,0,0],
    [0,0,0,0,5,0,5,0,0,0,0,0],
    [0,0,0,0,5,0,5,0,0,0,0,0],
    [0,0,0,0,2,0,2,0,0,0,0,0],
  ],
  // Enemies - 8x8 for smaller display
  goblin: [
    [0,0,2,2,2,2,0,0],
    [0,2,1,1,1,1,2,0],
    [0,1,3,1,1,3,1,0],
    [0,1,1,1,1,1,1,0],
    [0,0,1,4,4,1,0,0],
    [0,0,2,2,2,2,0,0],
    [0,0,1,0,0,1,0,0],
    [0,0,2,0,0,2,0,0],
  ],
  // Items - 8x8 icons
  sword: [
    [0,0,0,0,0,0,1,0],
    [0,0,0,0,0,1,2,0],
    [0,0,0,0,1,2,0,0],
    [0,0,0,1,2,0,0,0],
    [0,3,1,2,0,0,0,0],
    [0,4,3,1,0,0,0,0],
    [0,3,4,0,0,0,0,0],
    [0,0,3,0,0,0,0,0],
  ],
  key: [
    [0,0,1,1,1,0,0,0],
    [0,1,2,2,2,1,0,0],
    [0,1,2,0,2,1,0,0],
    [0,0,1,1,1,0,0,0],
    [0,0,0,1,0,0,0,0],
    [0,0,0,1,1,0,0,0],
    [0,0,0,1,0,0,0,0],
    [0,0,0,1,1,0,0,0],
  ],
  potion: [
    [0,0,0,3,3,0,0,0],
    [0,0,3,4,4,3,0,0],
    [0,0,0,3,3,0,0,0],
    [0,0,3,1,1,3,0,0],
    [0,3,1,1,1,1,3,0],
    [0,3,1,2,1,1,3,0],
    [0,3,1,1,1,1,3,0],
    [0,0,3,3,3,3,0,0],
  ],
  torch: [
    [0,0,0,3,3,0,0,0],
    [0,0,3,3,2,3,0,0],
    [0,0,0,2,2,0,0,0],
    [0,0,0,1,1,0,0,0],
    [0,0,0,1,1,0,0,0],
    [0,0,0,1,1,0,0,0],
    [0,0,0,1,1,0,0,0],
    [0,0,0,4,4,0,0,0],
  ],
  gem: [
    [0,0,0,3,3,0,0,0],
    [0,0,3,1,1,3,0,0],
    [0,3,1,3,1,1,3,0],
    [3,1,3,1,1,1,1,3],
    [3,1,1,1,1,1,1,3],
    [0,3,1,1,1,1,3,0],
    [0,0,3,1,1,3,0,0],
    [0,0,0,3,3,0,0,0],
  ],
}

// Generate CSS box-shadow string for pixel art rendering
function generatePixelArt(charId, pixelSize = 4) {
  const data = portraits[charId]
  const colors = pixelColors[charId]
  if (!data || !colors) return ''

  const shadows = []

  for (let y = 0; y < data.length; y++) {
    for (let x = 0; x < data[y].length; x++) {
      const colorKey = data[y][x]
      if (colorKey !== 0) {
        const color = colors[colorKey]
        const offsetX = x * pixelSize
        const offsetY = y * pixelSize
        shadows.push(`${offsetX}px ${offsetY}px 0 ${color}`)
      }
    }
  }

  return shadows.join(', ')
}

// Render header mascots on page load
function renderHeaderMascots() {
  const princess = document.getElementById('header-princess')
  const robot = document.getElementById('header-robot')

  if (princess) {
    princess.style.boxShadow = generatePixelArt('princess', 3)
  }
  if (robot) {
    robot.style.boxShadow = generatePixelArt('robot', 3)
  }
}

// Initialize mascots when DOM is ready
document.addEventListener('DOMContentLoaded', renderHeaderMascots)
